<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>for-in遍历</title>
</head>

<body>
    <script>
        // const obj = {
        //     name: 'ssy',
        //     age: 20,
        //     gender: '男',
        //     address: 'NanJing',
        //     sayHi: function () {
        //         console.log(this.name);
        //     },
        // };
        // // 遍历对象中的属性            
        // for (const key in obj) {
        //     console.log('属性名:' + key);
        //     console.log('属性值:' + obj[key]);
        //     // 注意，因为这里的属性名 key 是变量，所以，如果想获取属性值，不能写成 obj.key，而是要写成 obj[key]       
        // }

        // const obj1 = {
        //     name: 'ssy',
        //     age: 20,
        //     info: {
        //         desc: '好好学习',
        //     },
        // };

        // const obj2 = {};
        // //  用 for in 将 obj1 的值拷贝给 obj2
        // for (let key in obj1) {
        //     obj2[key] = obj1[key];
        // }

        // console.log('obj2:' + JSON.stringify(obj2));

        // obj1.info.desc = '天天向上'; // 当修改 obj1 的第二层数据时，obj2的值也会被改变。所以  for in 是浅拷贝

        // console.log('obj2:' + JSON.stringify(obj2));

        let obj1 = {
            name: 'ssy',
            age: 28,
            info: {
                desc: 'hello',
            },
            color: ['red', 'blue', 'green'],
        }

        let obj2 = {}
        deepCopy(obj2, obj1)
        console.log(obj2)
        obj1.info.desc = 'github'
        console.log(obj2)

        // 方法：深拷贝
        function deepCopy(newObj, oldObj) {
            for (let key in oldObj) {
                // 获取属性值 oldObj[key]  
                let item = oldObj[key]
                // 判断这个值是否是数组      
                if (item instanceof Array) {
                    newObj[key] = []
                    deepCopy(newObj[key], item)
                } else if (item instanceof Object) {
                    // 判断这个值是否是对象        
                    newObj[key] = {}
                    deepCopy(newObj[key], item)
                } else {
                    // 简单数据类型，直接赋值 
                    newObj[key] = item
                }
            }
        }
    </script>

</body>

</html>